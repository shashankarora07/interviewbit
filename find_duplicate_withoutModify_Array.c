#include<stdio.h>
#include<stdlib.h>

int FindDuplicateInArray(int *A, int n)
{
//	int slow = A[0];
//	int fast = A[A[0]];
//
//	while (slow != fast) {
//		slow = A[slow];
//		fast = A[A[fast]];
//		printf("slow = %d and fast = %d\n",slow,fast);
//	}
//
//	fast = 0;
//	while(slow != fast) {
//		slow = A[slow];
//		fast = A[fast];
//	}
//
//	if (slow == 0)
//		return -1;
//
//	return slow;

//	int i = 0;
//
//	int *count = (int *)calloc(sizeof(int),n-2);
//
//	for (i = 0; i < n-2; i++)
//		printf("%d  ",count[i]);
//	printf("\n");
//
//	for (i = 0; i < n; i++) {
//		if (count[A[i]] == 1) {
//			printf("%d  ",A[i]);
//		}
//		else {
//			count[A[i]]++;
//			//printf("count[%d] = %d\n",A[i],count[A[i]]);
//		}
//	}
//	printf("\n");

	//for (i = 0; i < n; i++)
	//	printf("%d  ",count[i]);
	//printf("\n");

	int i = 0, a = 0, b = 0;

	for (i = 1; i < n; i++)
		b ^= i;
	for (i = 0; i < n; i++)
		a ^= A[i];

	return a^b;
}


int main()
{
	
	//int arr[] = {3,4,1,4,7,3,2,8,1,9,10,9,5,6};
	/* int arr[] = {310, 164, 385, 493, 296, 369, 405, 421, 24, 187, 98, 109, 245, 324, 464, 438, 467, 526, \
		19, 39, 206, 128, 380, 119, 129, 85, 131, 510, 132, 40, 332, 275, 51, 528, 412, 525, 4, 259, 356, \
		258, 90, 66, 153, 223, 414, 89, 410, 227, 291, 314, 358, 204, 340, 436, 7, 188, 325, 538, 182, 141, \
		408, 198, 42, 337, 214, 509, 349, 79, 116, 428, 53, 91, 326, 333, 33, 415, 165, 271, 183, 244, 330, \
		392, 123, 522, 437, 420, 362, 331, 286, 84, 130, 163, 145, 483, 190, 482, 115, 16, 496, 418, 267, \
		240, 175, 65, 276, 154, 173, 355, 315, 504, 101, 260, 458, 274, 413, 497, 15, 213, 398, 473, 284, \
		456, 397, 309, 344, 5, 402, 229, 347, 236, 254, 140, 472, 391, 336, 535, 533, 25, 429, 475, 441, \
		352, 434, 26, 45, 75, 257, 57, 46, 442, 536, 209, 411, 146, 432, 34, 118, 346, 23, 512, 71, 480, \
		107, 321, 126, 52, 407, 393, 515, 217, 195, 294, 86, 502, 72, 517, 455, 281, 495, 230, 108, 295, \
		424, 426, 460, 524, 452, 181, 185, 208, 180, 47, 303, 520, 36, 200, 530, 12, 67, 445, 492, 419, \
		372, 105, 59, 306, 317, 379, 150, 63, 363, 248, 505, 167, 152, 404, 516, 316, 433, 70, 439, 390, \
		9, 133, 298, 232, 95, 157, 176, 215, 172, 224, 169, 127, 106, 8, 537, 135, 255, 313, 375, 241, 506, \
		253, 312, 11, 448, 139, 263, 2, 112, 21, 304, 297, 334, 278, 162, 142, 343, 328, 280, 69, 311, 486, \
		457, 285, 219, 499, 226, 329, 521, 374, 489, 76, 231, 193, 447, 431, 148, 444, 371, 256, 211, 365, \
		339, 56, 459, 350, 58, 269, 242, 249, 30, 43, 113, 177, 476, 364, 465, 3, 96, 484, 99, 147, 501, 270,\
		 425, 49, 487, 55, 373, 377, 400, 422, 477, 282, 423, 272, 384, 399, 498, 323, 238, 144, 83, 44, 327,\
		  158, 386, 287, 409, 216, 196, 277, 307, 235, 401, 466, 32, 22, 299, 471, 81, 378, 265, 137, 288, 159, \
		  283, 268, 395, 387, 13, 292, 490, 6, 122, 417, 243, 239, 203, 31, 293, 82, 485, 381, 202, 197, 273, \
		  403, 446, 383, 77, 60, 435, 102, 361, 205, 481, 353, 474, 301, 94, 125, 184, 367, 20, 151, 222, 237,\
		   17, 290, 523, 468, 156, 266, 149, 443, 289, 394, 513, 28, 519, 191, 507, 518, 478, 251, 396, 532, 416,\
		    440, 247, 35, 234, 308, 37, 302, 341, 1, 121, 138, 279, 469, 10, 233, 74, 61, 124, 78, 220, 194, 494,\
		     252, 88, 110, 189, 18, 261, 48, 38, 41, 114, 318, 479, 406, 360, 97, 454, 68, 136, 503, 451, 100,\
		      178, 160, 186, 514, 322, 210, 73, 212, 103, 54, 354, 500, 225, 450, 335, 305, 170, 462, 228, 348, \
		      199, 262, 143, 111, 155, 92, 319, 345, 491, 192, 14, 166, 207, 171, 338, 168, 250, 27, 389, 368, \
		      117, 351, 201, 179, 221, 529, 93, 87, 104, 134, 357, 359, 50, 430, 531, 488, 470, 449, 342, 320, \
		      134, 64, 62, 246, 511, 527, 388, 453, 264, 463, 370, 120, 508, 376, 461, 174, 382, 427, 161, 80, \
		      29, 300, 366, 218, 534}; */
	/*int arr[] = {247, 240, 303, 9, 304, 105, 44, 204, 291, 26, 242, 2, 358, 264, 176, 289, 196, 329, 189, \
	 102, 45, 111, 115, 339, 74, 200, 34, 201, 215, 173, 107, 141, 71, 125, 6, 241, 275, 88, 91, 58, 171, \
	 346, 219, 238, 246, 10, 118, 163, 287, 179, 123, 348, 283, 313, 226, 324, 203, 323, 28, 251, 69, 311,\
	  330, 316, 320, 312, 50, 157, 342, 12, 253, 180, 112, 90, 16, 288, 213, 273, 57, 243, 42, 168, 55, 144, \
	  131, 38, 317, 194, 355, 254, 202, 351, 62, 80, 134, 321, 31, 127, 232, 67, 22, 124, 271, 231, 162, 172,\
	  52, 228, 87, 174, 307, 36, 148, 302, 198, 24, 338, 276, 327, 150, 110, 188, 309, 354, 190, 265, 3, 108,\
	   218, 164, 145, 285, 99, 60, 286, 103, 119, 29, 75, 212, 290, 301, 151, 17, 147, 94, 138, 272, 279, 222, \
	   315, 116, 262, 1, 334, 41, 54, 208, 139, 332, 89, 18, 233, 268, 7, 214, 20, 46, 326, 298, 101, 47, 236, \
	   216, 359, 161, 350, 5, 49, 122, 345, 269, 73, 76, 221, 280, 322, 149, 318, 135, 234, 82, 120, 335, 98,\
	  274, 182, 129, 106, 248, 64, 121, 258, 113, 349, 167, 192, 356, 51, 166, 77, 297, 39, 305, 260, 14, 63, \
	  165, 85, 224, 19, 27, 177, 344, 33, 259, 292, 100, 43, 314, 170, 97, 4, 78, 310, 61, 328, 199, 255, 159, \
	  185, 261, 229, 11, 295, 353, 186, 325, 79, 142, 223, 211, 152, 266, 48, 347, 21, 169, 65, 140, 83, 156, \
	  340, 56, 220, 130, 117, 143, 277, 235, 59, 205, 153, 352, 300, 114, 84, 183, 333, 230, 197, 336, 244, 195, \
	  37, 23, 206, 86, 15, 187, 181, 308, 109, 293, 128, 66, 270, 209, 158, 32, 25, 227, 191, 35, 40, 13, 175, \
	  146, 299, 207, 217, 281, 30, 357, 184, 133, 245, 284, 343, 53, 210, 306, 136, 132, 239, 155, 73, 193, 278, \
	  257, 126, 331, 294, 250, 252, 263, 92, 267, 282, 72, 95, 337, 154, 319, 341, 70, 81, 68, 160, 8, 249, 96,\
	   104, 137, 256, 93, 178, 296, 225, 237};*/
	int arr[] = {3,4,2,1,3};
	int len = sizeof(arr)/sizeof(arr[0]);
	int repeatnum = 0;
	
	//printf("arr[2] = %d\n",arr[2]++);
	//printf("arr[3] = %d\n",arr[2]);
	repeatnum = FindDuplicateInArray(arr,len);
	//FindDuplicateInArray(arr,len);
	printf("repeatnum = %d\n",repeatnum);


	return 0;
}
